!function(e,t,n){"use strict";e(document).ready((function(){e(".typolab-fonts-list .font-preview-iframe").each((function(t,n){var a=e(n),o;a.find("iframe").on("load",(function(){var t,n=e(this.contentWindow.document).find(".single-entry"),o=n.outerHeight();a.css({lineHeight:o+"px",height:o}),n.find("p").width(a.width()),a.addClass("loaded")}))})),e(".fonts-list-select").each((function(t,n){var o=e(n),i=o.find(".alphabet a"),s=o.find(".search-bar input"),r=o.find(".search-bar select"),l=o.find(".font-list"),f=o.find(".font-list-data"),d=e('<div class="no-records">Nothing found!</div>'),v='<span class="checked"><i class="dashicons dashicons-yes"></i></span>',m=o.data("font-source"),h=i.filter(".current").data("letter"),g=o.data("currentFont"),y=o.data("currentFontVariants"),w=o.data("currentFontSubsets"),b=function(t){i.removeClass("current"),i.filter('[data-letter="'+t+'"]').addClass("current"),s.val("");var n=!(!r.length||!r.val().length);x.removeClass("search-match search-unmatch letter-unmatch").filter(".active").removeClass("active"),x.filter((function(a,o){var i=e(o);return t==e(o).data("letter")?i.addClass("active"):n&&i.addClass("letter-unmatch"),o})),l.scrollTop(0),h=t},k=function(t){i.addClass("letter-unmatch").each((function(n,a){t[a.textContent]&&e(a).removeClass("letter-unmatch").addClass("letter-match")}))},C=function(t,n){var o=e('<a href="#"></a>');if("google-fonts"==m){var i,s=(i=t.family).substring(0,1).toUpperCase();o.html(v+i).data({letter:s,category:t.category}).on("click",(function(e,n,a){e.preventDefault(),l.find("a").removeClass("current"),o.addClass("current"),c(t,n,a)})),h==s&&o.addClass("active"),n&&setTimeout((function(){a=!1,o.trigger("click",[y,w])}),1),o.appendTo(l)}else if("font-squirrel"==m){var i,s=(i=t.family_name).substring(0,1).toUpperCase();o.html(v+i).data({letter:s,category:t.classification}).on("click",(function(e,n,a){e.preventDefault(),l.find("a").removeClass("current"),o.addClass("current"),p(t,n,a)})),h==s&&o.addClass("active"),n&&setTimeout((function(){a=!1,o.trigger("click",[y,w])}),1),o.appendTo(l)}else if("premium-fonts"==m){var i,s=(i=t.family).substring(0,1).toUpperCase();o.html(v+i).data({letter:s,category:t.category}).on("click",(function(e,n,a){e.preventDefault(),l.find("a").removeClass("current"),o.addClass("current"),u(t,n,a)})),h==s&&o.addClass("active"),n&&setTimeout((function(){a=!1,o.trigger("click",[y,w])}),1),o.appendTo(l)}},_=JSON.parse(f.html());e.each(_,(function(e,t){var n=t.family?t.family:t.family_name;C(t,g==n)})),o.find(".loading-fonts").remove(),i.on("click",(function(t){t.preventDefault(),b(e(this).data("letter"))})),l.append(d);var x=l.find("a");s.on("keyup",(function(t){var n=e(this).val(),a=0;if(0==n.length)return x.removeClass("search-match search-unmatch"),void d.removeClass("active");x.each((function(t,o){var i=e(o),s=i.text();s.match(new RegExp("^"+ve(n),"i"))||s.match(new RegExp(" "+ve(n),"i"))||s.match(new RegExp(ve(n)+"$","i"))?(i.addClass("search-match").removeClass("search-unmatch"),a++):i.removeClass("search-match").addClass("search-unmatch")})),d[a>0?"removeClass":"addClass"]("active")})).on("blur",(function(){0==e(this).val().length&&x.removeClass("search-match search-unmatch")})),r.on("change",(function(){var t=r.val();if(i.removeClass("letter-match letter-unmatch current"),x.removeClass("category-match category-unmatch letter-unmatch active"),t){var n={};x.filter((function(a,o){var i=e(o);if(t==i.data("category")){var s=i.text().substring(0,1).toUpperCase();n[s]?n[s].count++:n[s]={letter:s,count:1},i.addClass("category-match")}else i.addClass("category-unmatch")})),k(n)}else h&&b(h)}))})),e("#typolab-wrapper .tooltip").each((function(t,n){e(n).tooltipster({theme:"tooltipster-borderless"})})),e("body").on("keydown",".font-downloader #request-filesystem-credentials-form input",(function(t){if(13==t.keyCode)return e(".font-downloader .hover .button-primary").click(),!1}));var n="",a=!0,o=0,i=e(".font-preview-container"),s=e('#edit-font-form input[name="font_family"]'),r=e('#edit-font-form textarea[name="font_data"]'),l=function(t,n,a,o){var s=e('<div class="font-preview-row"></div>'),r=e('<div class="font-preview-row-bg"></div>');i.append(s.clone().attr("id",t).addClass(o||"").append('<span class="row-title">'+n+"</span>").append(a).wrapInner(r))},f=function(e){switch(e){case"display":return"Display";break;case"handwriting":return"Handwriting";break;case"monospace":return"Monospace";break;case"sans-serif":return"Sans Serif";break;case"serif":return"Serif";break}return e},d=function(e){switch(e){case"latin":return"Latin";break;case"latin-ext":return"Latin Extended";break;case"cyrillic":return"Cyrillic";break;case"greek":return"Greek";break;case"vietnamese":return"Vietnamese";break;case"cyrillic-ext":return"Cyrillic Extended";break;case"greek-ext":return"Greek Extended";break}return e},c=function(c,p,u){if(n==c.family)return!1;n=c.family,t.clearInterval(o),i.html(""),l("font-family-name","Font Family:",'<p class="font-family-name">'+c.family+"</p>");var v=e("<iframe></iframe>"),m=e('<p class="description">Loading font preview...</p>'),h=ajaxurl+"?action=typolab-preview-google-fonts&font-family="+encodeURIComponent(c.family);return v.attr({src:h}).on("load",(function(){var t=e(this.contentWindow.document);m.remove(),v.height(t.height()),o=setInterval((function(){v.height(t.height())}),50),a&&e("html, body").animate({scrollTop:i.offset().top-50}),a=!0,v.after('<p class="font-details-link"><a href="https://fonts.google.com/specimen/'+encodeURIComponent(c.family)+'" target="_blank">Font Details</a> <span class="sep"></span> Category: '+f(c.category)+"</p>"),s.val(c.family),r.val(JSON.stringify(c));var n=e('<div class="checkboxes-container"></div>'),h=p?p.toString().split(","):["regular"];for(var g in c.variants){var y=c.variants[g],b=e("<label></label>"),k=e('<input type="checkbox" name="font_variants[]" value="'+y+'" '+(-1!=e.inArray(y,h)?"checked":"")+">");k.on("change",w),b.append(k),b.append("<span>"+(y.indexOf("italic")>0?y.replace("italic",", italic"):y)+"</span>").appendTo(n)}l("font-preview-variants","Font Variants",n,"half");var C=e('<div class="checkboxes-container"></div>'),_=u?u.split(","):["latin"];for(var g in c.subsets){var x=c.subsets[g],S=e("<label></label>");S.append('<input type="checkbox" name="font_subsets[]" value="'+x+'" '+(-1!=e.inArray(x,_)?"checked":"")+">"),S.append("<span>"+d(x)+"</span>").appendTo(C)}l("font-preview-subsets","Font Subsets",C,"half");var D=Math.max(n.outerHeight(),C.outerHeight());n.add(C).css({minHeight:D}),e(".fonts-list-select .font-list").css({maxHeight:Math.max(e(".font-preview-container").outerHeight()-95,450)}),w()})),l("font-preview-iframe","Live Preview",[m,v]),!0},p=function(f,d,c){var p,u=JSON.parse(e(".font-squirrel-data").html()).downloadedFonts[f.family_urlname];return n!=f.family_name&&(n=f.family_name,t.clearInterval(o),i.html(""),l("font-family-name","Font Family:",'<p class="font-family-name">'+f.family_name+"</p>"),s.val(f.family_name),e.getJSON("https://www.fontsquirrel.com/api/familyinfo/"+f.family_urlname,(function(t){var n=e('<div class="checkboxes-container"></div>'),s=d?d.split(","):[],c=["Regular"];if(e.each(t,(function(t,a){var o=a.style_name,i=e('<input type="checkbox" name="font_variants[]" value="'+a.fontface_name+'" '+(-1!=e.inArray(a.fontface_name,s)?"checked":"")+">"),r=e("<label></label>");s.length||-1==e.inArray(a.style_name,c)||i.prop("checked",!0),i.on("change",w),r.append(i),r.append('<span title="'+a.fontface_name+'">'+a.style_name+"</span>").appendTo(n)})),r.val(JSON.stringify(t)),u){var p=e("<iframe></iframe>"),m=e('<p class="description">Loading font preview...</p>'),b=ajaxurl+"?action=typolab-preview-font-squirrel&font-family="+encodeURIComponent(f.family_urlname);return p.attr({src:b}).on("load",(function(){var t=e(this.contentWindow.document);m.remove(),p.height(t.height()),o=setInterval((function(){p.height(t.height())}),100),a&&e("html, body").animate({scrollTop:i.offset().top-50}),a=!0;var s=e('<a href="#" class="font-redownload" title="Re-download font"><i class="dashicons dashicons-update"></i></a>');p.after('<p class="font-details-link"><a href="https://www.fontsquirrel.com/fonts/'+encodeURIComponent(f.family_urlname)+'" target="_blank">Font Details</a> <span class="sep"></span> Category: '+f.classification+"</p>"),p.next().append(s),s.on("click",(function(e){if(e.preventDefault(),s.hasClass("is-downloaded"))return!1;confirm("Confirm font re-download?")&&(s.addClass("fa-spin").attr("title","Downloading font..."),h("font-squirrel",f.family_urlname,(function(e){if(s.removeClass("fa-spin"),e.errors){var t="";for(var n in e.error_msg)t+="\n"+e.error_msg[n];alert(t.trim())}else s.addClass("is-downloaded").html('<i class="dashicons dashicons-yes"></i>').attr("title","Font has been downloaded successfully!")})))})),l("font-preview-variants","Font Variants",n),w()})),l("font-preview-iframe","Live Preview",[m,p]),V(),!0}var k=e('<div class="external-font-previews"></div>'),C=e('<p class="description">Loading font preview...</p>');l("font-preview-iframe","Preview",[C,k]),a&&e("html, body").animate({scrollTop:i.offset().top-50}),a=!0;var _=v(t);C.remove(),k.append(_),k.after('<p class="font-details-link"><a href="https://www.fontsquirrel.com/fonts/'+encodeURIComponent(f.family_urlname)+'" target="_blank">Font Details</a> <span class="sep"></span> Category: '+f.classification+"</p>"),l("font-preview-variants","Font Variants",n),w();var x="<p>You need to download and install this font in order to use it in this site.<br>";x+="Installation process is automatic, simply click the button below:</p>";var S=e('<a href="#install-font-package" class="button-primary download-font">Download &amp; Install Font</a>');l("font-squirrel-downloader","Install Font",[x,e('<p class="hover">').append(S)],"font-downloader"),S.on("click",(function(t){if(t.preventDefault(),S.hasClass("disabled"))return!1;if(g()){var n=y();if(!n.hostname||!n.password||!n.username)return alert("Please enter connection credentials to proceed!"),!1}S.addClass("disabled").html("Installing font..."),h("font-squirrel",f.family_urlname,(function(t){var n=e("#font-squirrel-downloader .font-preview-row-bg");if(S.removeClass("disabled").html("Download &amp; Install Font"),n.find(".notice-error").remove(),t.errors)for(var a in n.append('<div class="notice notice-error"></div>'),t.error_msg)n.find(".notice-error").append("<p>"+t.error_msg[a]+"</p>");else n.find("p, .download-font").remove(),g()&&e("#request-filesystem-credentials-form").parent().remove(),n.append('<p class="font-installed"><i class="dashicons dashicons-yes"></i> Font has been installed successfully. Review font settings and click <strong>Save Changes</strong> button.</p>')}))})),W("Font is not installed")})),!0)},u=function(t,f,d){var c=JSON.parse(e(".premium-font-data").html()),p=c.downloadedFonts[t.family_urlname];if(n==t.family)return!1;var u=e('<div class="checkboxes-container"></div>'),v=f?f.split(","):[],b=["FunctionProBold","FunctionProBook","FunctionProDemi","FunctionProExtraBold","FunctionProLight","FunctionProMedium"];e.each(t.variants,(function(t,n){var a=e('<input type="checkbox" name="font_variants[]" value="'+t+'" '+(-1!=e.inArray(t,v)?"checked":"")+">"),o=e("<label></label>");v.length||-1==e.inArray(n.name,b)||a.prop("checked",!0),a.on("change",w),o.append(a),o.append('<span title="'+t+'">'+n.name+"</span>").appendTo(u)}));var k=e('<div class="checkboxes-container"></div>'),C=d?d.split(","):["macroman"];if(e.each(t.subsets,(function(t,n){var a=e("<label></label>");a.append('<input type="checkbox" name="font_subsets[]" value="'+t+'" '+(-1!=e.inArray(t,C)?"checked":"")+">"),a.append("<span>"+n+"</span>").appendTo(k)})),i.html(""),s.val(t.family),r.val(JSON.stringify(t)),l("font-family-name","Font Family:",'<p class="font-family-name">'+t.family+"</p>"),p){var _=e("<iframe></iframe>"),x=e('<p class="description">Loading font preview...</p>'),S=ajaxurl+"?action=typolab-preview-premium-fonts&font-family="+encodeURIComponent(t.family_urlname);return _.attr({src:S}).on("load",(function(){var n=e(this.contentWindow.document);x.remove(),_.height(n.height()),o=setInterval((function(){_.height(n.height())}),100),a&&e("html, body").animate({scrollTop:i.offset().top-50}),a=!0;var s=e('<a href="#" class="font-redownload" title="Re-download font"><i class="dashicons dashicons-update"></i></a>');_.after('<p class="font-details-link"><a href="'+t.creator+'" target="_blank">Font Details</a> <span class="sep"></span> Category: '+t.category+(p?"":' <span class="sep"></span> Size: '+t.size)+"</p>"),c.isActivated&&c.licenseKey&&(_.next().append(s),s.on("click",(function(e){if(e.preventDefault(),s.hasClass("is-downloaded"))return!1;confirm("Confirm font re-download?")&&(s.addClass("fa-spin").attr("title","Downloading font..."),h("premium-fonts",t.family,(function(e){if(s.removeClass("fa-spin"),e.errors){var t="";for(var n in e.error_msg)t+="\n"+e.error_msg[n];alert(t.trim())}else s.addClass("is-downloaded").html('<i class="dashicons dashicons-yes"></i>').attr("title","Font has been downloaded successfully!")})))}))),l("font-preview-variants","Font Variants",u,"two-thirds"),l("font-preview-subsets","Font Subsets",k,"one-third"),w()})),l("font-preview-iframe","Live Preview",[x,_]),V(),!0}var D=e('<div class="external-font-previews"></div>'),F=e('<p class="description">Loading font preview...</p>');l("font-preview-iframe","Preview",[F,D]);var I=m(t.variants);F.remove(),D.append(I),D.after('<p class="font-details-link"><a href="'+t.creator+'" target="_blank">Font Details</a> <span class="sep"></span> Category: '+t.category+(p?"":' <span class="sep"></span> Size: '+t.size)+"</p>"),l("font-preview-variants","Font Variants",u,"two-thirds"),l("font-preview-subsets","Font Subsets",k,"one-third"),w();var T="<p>You need to download and install this font in order to use it in this site.<br>";T+="Installation process is automatic, simply click the button below:</p>";var z=e('<a href="#install-font-package" class="button-primary download-font">Download &amp; Install Font</a>'),j="",q=g()?typolab_request_system_credentials_form:"";c.isActivated&&c.licenseKey?z.on("click",(function(n){if(n.preventDefault(),z.hasClass("disabled"))return!1;if(g()){var a=y();if(!a.hostname||!a.password||!a.username)return alert("Please enter connection credentials to proceed!"),!1}z.addClass("disabled").html("Installing font..."),h("premium-fonts",t.family,(function(t){var n=e("#premium-font-downloader .font-preview-row-bg");if(z.removeClass("disabled").html("Download &amp; Install Font"),n.find(".notice-error").remove(),t.errors)for(var a in n.append('<div class="notice notice-error"></div>'),t.error_msg)n.find(".notice-error").append("<p>"+t.error_msg[a]+"</p>");else n.find("p, .download-font").remove(),g()&&e("#request-filesystem-credentials-form").parent().remove(),n.append('<p class="font-installed"><i class="dashicons dashicons-yes"></i> Font has been installed successfully. Review font settings and click  <strong>Save Changes</strong> button.</p>')}))})):(z.addClass("disabled").on("click",(function(e){return!1})),j='<div class="notice notice-warning"><p>To download this font you must <a href="admin.php?page=kalium&tab=theme-registration">register the theme</a>.</p></div>'),l("premium-font-downloader","Install Font",[T,q,e('<p class="hover">').append(z),j],"font-downloader"),W("Font is not installed")},v=function(t){var n=e("<div></div>");return e.each(t,(function(t,a){var o=e('<div class="preview-entry"></div>');o.append('<img src="'+a.listing_image+'">'),o.append("<span>"+a.style_name+"</span>"),n.append(o)})),n.children()},m=function(t){var n=e("<div></div>");return e.each(t,(function(t,a){var o=e('<div class="preview-entry"></div>');a.screenshot&&(o.append('<img src="https://api.laborator.co/assets/img/font-previews/'+a.screenshot+'">'),o.append("<span>"+a.name+"</span>"),n.append(o))})),n.children()},h=function(t,n,a){var o,i=e(".fonts-list-select .font-list");switch(i.addClass("download-in-progress"),t){case"font-squirrel":o="typolab_font_squirrel_download";break;case"premium-fonts":o="typolab_premium_fonts_download";break}if(!o)return!1;var s={action:o,font_family:n};return e.post(ajaxurl,e.extend(s,y()),(function(e){i.removeClass("download-in-progress"),"function"==typeof a&&a.apply(this,[e]),V()}),"json"),!0},g=function(){return!1;return"string"==typeof typolab_request_system_credentials_form},y=function(){var t={},n,a;e("#request-filesystem-credentials-form").length&&e("#request-filesystem-credentials-form").find('input[type="text"], input[type="password"], input[type="hidden"], input:checked, input[type="submit"]').each((function(n,a){t[e(a).attr("name")]=e(a).val()}));return t},w=function(){var t=e('#font-preview-variants input[type="checkbox"]:checked'),n=e(".font-selectors-list .font-variants select"),a=e(".font-selectors-list .font-weight select"),o=e(".custom-font-form-layout");if(o.length){var i=[];o.find('#font-family-names input[name="font_variants[]"]').each((function(n,a){var o=e(a).val();o=o.replace(/(font-family:|\'|\")/gi,"").trim(),e.each(o.split(";"),(function(t,n){var a=n.split(",").map((function(e){return e.trim()}));n.trim().length&&i.push(e("<input>").attr({value:a.join(", ")}))})),t=e(i)}))}n.each((function(n,a){var o=e(a),i=o.data("selected"),s=t.length>0;o.find("option, optgroup").remove(),o.prop("disabled",0==s)[s?"removeClass":"addClass"]("disabled"),s||o.append("<option>- No font variants -</option>"),t.each((function(t,n){var a,s=e(n).val(),r=e("<option>"+s+"</option>").val(s);o.append(r),s==i&&r.prop("selected",!0)}))}));var s=j();s.length>0&&n.each((function(t,n){var a=e(n),o=a.data("selected");a.find("option, optgroup").remove(),a.prop("disabled",!1).removeClass("disabled"),e.each(s,(function(t,n){var i=e("<option>"+n.title+"</option>").val(n.value);a.append(i),n.value==o&&i.prop("selected",!0)}))})),a.each((function(t,n){var a=e(n),o=a.data("selected");a.find("option, optgroup").remove(),a.append('<option value="">Default</option>');for(var t=100;t<=900;t+=100){var i=e('<option value="'+t+'">'+t+"</option>");a.append(i),t==o&&i.prop("selected",!0)}}));var r=e("#font-preview-variants"),l=e("#font-preview-subsets"),f;r.length&&l.length&&r.add(l).find(".font-preview-row-bg").css("min-height","").css("min-height",Math.max(r.outerHeight(),l.outerHeight()))},b=function(){var t=e(".custom-font-form-layout"),n=t.find("#font_url").val(),s=[],r=e(".custom-font-form-layout").hasClass("is-adobe-font");if(t.find('#font-family-names input[name="font_variants[]"]').each((function(t,n){var a=e(n).val().split(";");for(var o in a)s.push(a[o])})),!n||0==s.join("").trim().length||t.data("last-value")==n+s.join(";"))return!1;t.data("last-value",n+s.join(";")),i.html("");var f=e("<iframe></iframe>"),d=e('<p class="description">Loading font preview...</p>'),c=ajaxurl+"?action=typolab-preview-custom-font&font-url="+encodeURIComponent(n)+"&font-family="+encodeURIComponent(s.join(";"))+(r?"&adobe-project-id="+n:"");return f.attr({src:c}).on("load",(function(){var t=e(this.contentWindow.document);d.remove(),f.height(t.height()),o=setInterval((function(){f.height(t.height())}),50),a&&e("html, body").animate({scrollTop:i.offset().top-50}),a=!0,w()})),l("font-preview-iframe","Live Preview",[d,f]),!0},k=function(){var t=e(".typekit-font-form-layout"),n=t.find("#kit_id").val();if(!n||t.data("kit-id")==n)return!1;t.data("kit-id",n),i.html("");var s=e("<iframe></iframe>"),r=e('<p class="description">Loading font preview...</p>'),f=ajaxurl+"?action=typolab-preview-typekit-font&kit-id="+encodeURIComponent(n);return s.attr({src:f}).on("load",(function(){var t=e(this.contentWindow.document);if(r.remove(),s.height(t.height()),o=setInterval((function(){s.height(t.height())}),50),a&&e("html, body").animate({scrollTop:i.offset().top-50}),a=!0,"undefined"!=this.contentWindow.kitInfo.kit){var l=this.contentWindow.kitInfo.kit,f=[];e.each(l.families,(function(e,t){f.push('<a href="https://typekit.com/fonts/'+t.slug+'" title="Variations: '+t.variations.join(", ")+'" target="_blank">'+t.name+"</a>")})),s.after('<p class="font-details-link">Font Families: '+f.join(", ")+'<a href="https://typekit.com/kit_editor/kits/'+n+'" class="font-redownload" target="_blank" title="Kit Settings"><i class="dashicons dashicons-admin-generics"></i></a></p>')}})),l("font-preview-iframe","Live Preview",[r,s]),!0},C=function(t){if("template"in wp&&_.length){var n=wp.template("uploaded-font-entry"),a={index:S.length};"object"==typeof t&&e.extend(a,t),a.entryId="uploaded-font-entry-"+a.index,S.push({data:a,html:n(a)}),x()}},_=e(".uploaded-font-form-layout"),x=function(){for(var t in _.find(".typolab-table").remove(),S){var n=S[t],a=n.data,o=e(n.html),i,s;o.find("#"+a.entryId+"-weight").find('option[value="'+a.weight+'"]').prop("selected",!0),o.find("#"+a.entryId+"-style").find('option[value="'+a.style+'"]').prop("selected",!0),"files"in a&&(o.find("#"+a.entryId+"-file-woff").val(a.files.woff),o.find("#"+a.entryId+"-file-woff2").val(a.files.woff2),o.find("#"+a.entryId+"-file-ttf").val(a.files.ttf),o.find("#"+a.entryId+"-file-svg").val(a.files.svg),o.find("#"+a.entryId+"-file-eot").val(a.files.eot)),o.data("data-index",a.index),_.append(o)}},S=[],D=e(".uploaded-font-form-layout").length&&e("#font_face"),F=e.trim(e("#uploaded-font-variants").html());if(F)for(var I in F=JSON.parse(F))C(F[I]);_.on("click",".delete",(function(t){if(t.preventDefault(),confirm("Confim delete?")){var n=e(this).closest(".typolab-table").data("dataIndex");for(var a in S)n==S[a].data.index&&delete S[a];x(),N()}})),e("#add-uploaded-font-variant").on("click",(function(e){e.preventDefault(),C()})),_.length&&_.sortable(),_.on("click",".font-file-entry .button",(function(t){t.preventDefault();var n=e(this),a=n.prev(),o=n.parent(),i="";o.hasClass("font-file-woff")?i="woff":o.hasClass("font-file-woff2")?i="woff2":o.hasClass("font-file-ttf")?i="ttf":o.hasClass("font-file-svg")?i="svg":o.hasClass("font-file-eot")&&(i="eot");var s=wp.media({title:"Upload ."+i+" font file",multiple:!1,library:{type:["font","application"]}});s.on("select",(function(){var e=s.state().get("selection").first().toJSON();a.val(e.url)})),s.open()})),e("#typolab-wrapper").on("click",".typolab-toggle-body",(function(t){t.preventDefault(),e(this).closest(".typolab-table").toggleClass("typolab-toggle--toggled")}));var T=function(){if("template"in wp&&_.length){var t=e("#uploaded-font-preview-data"),n=e(".font-preview-container"),a=D.val(),o="\n",i="\t",s="<style>\n",r=[],l=wp.template("font-preview");if(0!==t.length&&0!==S.length){for(var f in S){var d,c=S[f].data,p=c.files,u=[];u.push("local('"+a+"')"),u.push("local('"+a.replace(/\s/g,"-")+"')"),p&&(p.eot&&u.push("url('"+p.eot+"?#iefix') format('embedded-opentype')"),p.woff&&u.push("url('"+p.woff+"') format('woff')"),p.woff2&&u.push("url('"+p.woff2+"') format('woff2')"),p.ttf&&u.push("url('"+p.ttf+"') format('truetype')"),p.svg&&u.push("url('"+p.svg+"#svgFont') format('svg')")),s+="@font-face {\n",s+="\tfont-family: '"+a+"';"+o,s+="\tfont-style: "+c.style+";"+o,s+="\tfont-weight: "+c.weight+";"+o,p&&p.eot&&(s+="\tsrc: url('"+p.eot+"');"+o),s+="\tsrc: "+u.join(", ")+";"+o,s+="}",r.push({family:a,style:c.style,weight:c.weight})}s+="\n</style>",t.html(s);var v=l({variants:r});n.html(v)}}};T(),F||C();var z=function(){e(".uploaded-font-form-layout .typolab-table").each((function(t,n){var a=e(n),o=a.data("dataIndex"),i=a.find(".select-font-style").val(),s=a.find(".select-font-weight").val(),r={woff:a.find(".font-file-woff input").val(),woff2:a.find(".font-file-woff2 input").val(),ttf:a.find(".font-file-ttf input").val(),eot:a.find(".font-file-eot input").val(),svg:a.find(".font-file-svg input").val()};for(var l in S)o==S[l].data.index&&(S[l].data.style=i,S[l].data.weight=s,S[l].data.files=r)}))},j=function(){var e=[],t=D&&D.val();for(var n in S){var a=S[n].data,o=t+" ("+a.style+","+a.weight+")",i=t;"normal"===a.style&&"normal"===a.weight||(i+=" (",a.style&&"normal"!==a.style&&(i+=a.style.charAt(0).toUpperCase()+a.style.slice(1)),a.weight&&"normal"!==a.weight&&(i+=("normal"!==a.style?", ":"")+a.weight),i+=")"),e.push({value:o,title:i})}return e},q=function(){z(),T(),w()};if(D){var L=null,N=function(){t.clearTimeout(L),L=null,L=setTimeout(q,250)};D.on("keyup",N),_.on("change","select, input",N)}if(1==e("form#edit-font-form").length){var P=e(".font-selectors-list tbody"),R=P.find(".no-records").clone();P.sortable({helper:function(t,n){return n.children().each((function(){e(this).width(e(this).width())})),n},handle:".sort-css-rule-row",axis:"y"});var U=e("#edit-font-form #save_font_changes");U.data("text",U.val());var A=e(".typekit-font-form-layout");A.length&&(A.on("blur","#kit_id",k),A.find("#typekit-font-generate-preview").on("click",(function(e){e.preventDefault(),k()})),a=!1,k());var H=e(".custom-font-form-layout");if(H.length){var O=H.find(".font-family-entries"),J=e('<li><input type="text" name="font_variants[]" value="" required="required"><a href="#" class="remove"><i class="dashicons dashicons-no"></i></a></li>');H.on("click","#add-custom-font-input",(function(e){e.preventDefault(),O.append(J.clone()).find("li:last-child input").focus()})),O.on("click","a.remove",(function(t){if(t.preventDefault(),e(this).prev().val().length>0&&!confirm("Are you sure you want to delete this font family name?"))return!1;e(this).parent().remove(),w()})),H.on("blur",'#font_url, #font-family-names input[name="font_variants[]"]',b).find("#custom-font-generate-preview").on("click",(function(e){e.preventDefault(),b()})),a=!1,b()}var E=e("#typolab-toggle-advanced-options");E.on("click",(function(e){e.preventDefault(),E.toggleClass("shown").html(E.hasClass("shown")?E.data("hide-options"):E.data("show-options"))})).html(E.hasClass("shown")?E.data("hide-options"):E.data("show-options"));var V=function(){U.removeClass("disabled").prop("disabled",!1).val(U.data("text"))},W=function(e){U.addClass("disabled").prop("disabled",!0),e&&U.val(e)},G=function(e){var t=P.find("tr"),n=t.length+1+(e||0);return t.filter("#css-selector-"+n).length?G(e?e+1:1):n},M=function(t,n){if("function"!=typeof t){var a=e("<tr></tr>"),o=e('<td class="font-drag"></td>'),i=e('<td class="font-selector"></td>'),s=e('<td class="font-variants"></td>'),r=e('<td class="font-weight"></td>'),l=e('<td class="font-sizes"></td>'),f=e('<td class="font-case"></td>'),d=e('<td class="font-selector-action"></td>'),c=e(".custom-font-form-layout").is(".is-adobe-font");a.append(o).append(i).append(s),c&&a.append(r),a.append(f).append(l).append(d),P.find(".no-records").remove();var p=G();a.attr("id","css-selector-"+p);var u=e("<input>").attr({type:"text",required:!0,placeholder:"CSS Selector Rule"+(1==p?" (i.e.: body, p, .myclass)":""),name:"font_selectors["+p+"][selector]",tabIndex:p,value:t&&t.selector?t.selector:""}),v;u.appendTo(i),e('<a href="#" class="sort-css-rule-row"><i class="dashicons dashicons-menu-alt"></i></a>').appendTo(o);var m=e("<select>").attr({name:"font_selectors["+p+"][variant]"});if(t&&t.variant&&m.data("selected",t.variant),m.append('<option value="" selected disabled>Loading...</option>').appendTo(s).on("change",(function(t){e(this).data("selected",e(this).val())})),c){var h=e("<select>").attr({name:"font_selectors["+p+"][weight]"});t&&t.weight&&h.data("selected",t.weight),h.append('<option value="" selected disabled>Loading...</option>').appendTo(r).on("change",(function(t){e(this).data("selected",e(this).val())}))}var g=e("<select>").attr({className:"font-case",name:"font_selectors["+p+"][text-transform]",tabIndex:p,title:"Value for `fext-transform` property"}),y={"":"Default",uppercase:"Upper case",lowercase:"Lower case",capitalize:"Capitalize"};for(var w in y)e("<option>",{value:w}).text(y[w]).prop("selected",1==(t&&t["text-transform"]&&w==t["text-transform"])).appendTo(g);g.appendTo(f);var b=e("<input>").attr({type:"number",placeholder:"General",className:"font-size-general",step:"any",name:"font_selectors["+p+"][font-sizes][general]",tabIndex:p,value:t&&t.fontSizes&&t.fontSizes.general?t.fontSizes.general:""}),k=e("<input>").attr({type:"number",placeholder:"Desktop",className:"font-size-desktop",step:"any",name:"font_selectors["+p+"][font-sizes][desktop]",tabIndex:p,value:t&&t.fontSizes&&t.fontSizes.desktop?t.fontSizes.desktop:""}),C=e("<input>").attr({type:"number",placeholder:"Tablet",className:"font-size-tablet",step:"any",name:"font_selectors["+p+"][font-sizes][tablet]",tabIndex:p,value:t&&t.fontSizes&&t.fontSizes.tablet?t.fontSizes.tablet:""}),_=e("<input>").attr({type:"number",placeholder:"Mobile",className:"font-size-mobile",step:"any",name:"font_selectors["+p+"][font-sizes][mobile]",tabIndex:p,value:t&&t.fontSizes&&t.fontSizes.mobile?t.fontSizes.mobile:""});b.appendTo(l),k.appendTo(l),C.appendTo(l),_.appendTo(l);var x=e("<select>").attr({name:"font_selectors["+p+"][font-sizes][unit]"});x.append('<option value="px">px</option>'),x.append('<option value="em">em</option>'),x.append('<option value="rem">rem</option>'),x.append('<option value="%">%</option>'),t&&t.fontSizes&&t.fontSizes.unit&&x.find("option").each((function(n,a){t.fontSizes.unit==e(a).val()&&e(a).prop("selected",!0)})),x.appendTo(l);var S=e('<a href="#" class="remove-font-selector"><i class="dashicons dashicons-no"></i></a>');S.on("click",(function(e){e.preventDefault(),(0==u.val().trim().length||confirm("Confirm delete?"))&&(a.remove(),0==P.find("tr:not(.no-records)").length&&P.append(R))})),S.appendTo(d),P.append(a),n&&u.focus()}},B=e("script#font-selectors");if(B.length){var K=JSON.parse(B.html());for(var $ in K)M(K[$])}var Y=e(".predefined-css-selectors"),Q=function(t){var n;e(t.target).closest(Y).length||Y.removeClass("shown")};Y.on("click",".button",(function(n){n.preventDefault(),Y.toggleClass("shown"),Y.hasClass("shown")?e(t).on("click",Q):e(t).off("click",Q)})),Y.on("click","ul li a",(function(t){t.preventDefault();var n=e(this).data("selectors"),a=[];for(var o in n)a.push(n[o]);M({selector:a.join(", ")}),Y.removeClass("shown"),w()})),w(),e("#add-new-selector").on("click",(function(e){e.preventDefault(),M(null,!0),w()}));var X=e(".font-conditional-loading tbody"),Z=e("script#conditional-statements");if(Z)var ee=JSON.parse(Z.html());var te=function(t){var n=e("<tr></tr>"),a=e("<td></td>").addClass("statement"),o=e("<td></td>").addClass("operator"),i=e("<td></td>").addClass("criteria"),s=e("<td></td>").addClass("actions");X.find(".no-statements").remove(),X.append('<tr><td colspan="4" class="or-label"><span>OR</span></td></tr>');var r=e("<select></select>").attr("name","statements[]"),l=[];l.push({value:"post_type",text:"Post Type",group:"General"}),l.push({value:"page_type",text:"Page Type",group:"General"}),l.push({value:"page_template",text:"Page Template",group:"General"}),e.each(ee.data.post_types,(function(e,t){l.push({value:e,text:t.singular,group:"Post Types"})})),e.each(ee.data.taxonomies,(function(e,t){l.push({value:e,text:t.singular,group:"Taxonomy :: "+ee.data.post_types[t.post_type].name})}));var f={};e.each(l,(function(n,a){var o=e('<option value="'+a.value+'">'+a.text+"</option>");a.group?(f[a.group]||(f[a.group]=e("<optgroup></optgroup>").attr("label",a.group),f[a.group].appendTo(r)),f[a.group].append(o)):o.appendTo(r),t&&t.statement==a.value&&o.prop("selected",!0)})),r.on("change",(function(e){ne(r.val(),c)})),a.append(r);var d=e("<select></select>").attr({name:"operators[]"});d.append('<option value="==">is</option>'),d.append('<option value="!=">is not</option>'),o.append(d),t&&d.find('option[value="'+t.operator+'"]').prop("selected",!0);var c=e("<select></select>").attr({name:"criterions[]",class:"is-loading"});c.append('<option value="" class="loading-options">Loading options...</option>'),i.append(c),c.on("valuesSet",(function(n,a){t&&a==t.statement&&e(this).find("option").each((function(n,a){e(a).val()==t.criteria&&e(a).prop("selected",!0)}))}))
;var p=e('<a href="#" class="remove-conditional-statement"><i class="dashicons dashicons-no"></i></a>');p.on("click",(function(e){e.preventDefault(),confirm("Confirm delete?")&&(n.prev().remove(),n.remove(),0==X.find("tr").length&&X.append('<tr class="no-statements"><td colspan="4">No defined conditional statements. Font will be loaded in all pages.</td></tr>'))})),p.appendTo(s),X.append(n.append(a).append(o).append(i).append(s)),r.trigger("change")},ne=function(t,n){return n.addClass("is-loading").find("option").remove(),n.append('<option value="">Loading data...</option>'),"post_type"==t?(n.removeClass("is-loading").find("option").remove(),e.each(ee.data.post_types,(function(t,a){n.append(e('<option value="'+t+'">'+a.singular+"</option>"))})),n.trigger("valuesSet",t)):"page_type"==t?(n.removeClass("is-loading").find("option").remove(),e.each(ee.data.page_types,(function(t,a){n.append(e('<option value="'+t+'">'+a.name+"</option>"))})),n.trigger("valuesSet",t)):"page_template"==t?(n.removeClass("is-loading").find("option").remove(),e.each(ee.data.page_template,(function(t,a){n.append(e('<option value="'+t+'">'+a.name+"</option>"))})),n.trigger("valuesSet",t)):ee.data[t]?(n.removeClass("is-loading").find("option").remove(),e.each(ee.data[t],(function(e,t){n.append('<option value="'+t.value+'">'+t.text+"</option>")})),0==ee.data[t].length&&n.addClass("is-loading").append('<option value="">:: No Entries Found ::</option>'),n.trigger("valuesSet",t)):ee.data.post_types[t]?ee.data[t]||e.post(ajaxurl,{action:"typolab_get_post_type_entries",post_type:t},(function(e){e.success&&(ee.data[t]=e.entries,ne(t,n))}),"json"):ee.data.taxonomies[t]&&(ee.data[t]||e.post(ajaxurl,{action:"typolab_get_taxonomy_entries",taxonomy:t},(function(e){e.success&&(ee.data[t]=e.entries,ne(t,n))}),"json")),n};e("#add-new-conditional-statement").on("click",(function(e){e.preventDefault(),te()})),e.each(ee.statements,(function(e,t){te(t)}));var ae=e('select[name="font_status"]');if(ae.length){var oe=function(){ae.closest(".grouped-input")["published"==ae.val()?"addClass":"removeClass"]("green")};ae.on("change",oe),oe()}}e(".font-sizes-container").length&&(e(".font-sizes-container .show-responsive-options").on("click",(function(t){t.preventDefault(),e(this).closest(".font-size-group").toggleClass("responsive-options-shown")})),e(".font-sizes-container .font-size-group").each((function(t,n){var a=e(n);a.find("table tbody .hidden input").filter((function(t,n){return e(n).val().length>0})).length&&a.addClass("responsive-options-shown"),a.find("table tbody .hidden select").filter((function(t,n){return e(n).val().length>0})).length&&a.addClass("responsive-options-shown")})),e(".add-font-selectors-table").on("click",".add-entry",(function(t){t.preventDefault();var n=e(this).closest("tr").clone(),a=e('<a class="remove" title="Delete Selector" href="#"><i class="dashicons dashicons-no"></i></a>');n.find("input").val(""),n.find(".add-remove *").remove(),n.find(".add-remove").append(a),e(this).closest("tbody").append(n),a.on("click",(function(e){e.preventDefault(),confirm("Confirm delete of CSS selector")&&n.remove()})),n.find("input:first").focus()})),e("#new-font-sizes-group").on("click",(function(t){t.preventDefault(),e(".add-new-font-size-group-container").slideToggle("normal",(function(){e(this).find("input, textarea").first().focus()}))})),e(".delete-custom-font-sizes-group").on("click",(function(e){confirm("Are you sure you want to delete this font size group?")||e.preventDefault()})));var ie=e("#typolab-advanced-settings");if(ie.length){e(".typolab-toggle-advanced-font-settings").on("click",(function(e){e.preventDefault(),ie.slideToggle(300)}));var se=ie.find(".font-export-options"),re=ie.find(".font-export-loading"),le=ie.find(".font-export-code"),fe=ie.find("#typolab-export-settings");fe.on("click",(function(t){t.preventDefault();var n=se.find("#typolab_export_font_faces").is(":checked")?1:0,a=se.find("#typolab_export_font_sizes").is(":checked")?1:0,o=se.find("#typolab_export_font_settings").is(":checked")?1:0;if(se.hasClass("is-loading")||se.hasClass("done")||!(n||a||o))return!1;se.addClass("is-loading").hide(),re.fadeIn(),e.post(ajaxurl,{action:"typolab-export-import-manager",doExport:!0,fontFaces:n,fontSizes:a,fontSettings:o},(function(e){if(se.removeClass("is-loading"),re.hide(),e.exported){var t=le.find("textarea");t.val(e.exported),le.fadeIn(100,(function(){t.select(),se.addClass("done"),fe.addClass("disabled")}))}else alert("An error occured, export settings are not avaialble!")}),"json")})),e("#typolab-import-button").on("click",(function(t){e("#save_font_settings").click()}))}e(".downloaded-fonts-list tbody .trash").on("click",(function(e){var t;if(!confirm("Are you sure you want to delete font files?\n\nThis won't delete fonts from the list, only font files."))return!1})),e(".typolab-fonts-list").on("click",".trash",(function(e){if(!confirm("Are you sure you want to delete this font?"))return e.preventDefault(),!1}));var de=e(".typolab-select-font-source");if(de.length){var ce=de.find("tbody tr"),pe=function(t){var n=e(".typolab-select-font-source").outerHeight();n-=e("#typolab_add_font").outerHeight(!0),e(".font-source-description").removeClass("selected").filter(".font-source-description-"+t).addClass("selected"),e(".typolab-selected-font-source").css({minHeight:n})};ce.on("click",(function(t){var n=e(this).find('input[type="radio"]'),a=n.val();ce.removeClass("hover"),n.prop("checked",!0),e(this).addClass("hover"),pe(a)}));var ue=ce.find("input:checked");ue.closest("tr").addClass("hover"),pe(ue.val())}var ve=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}}))}(jQuery,window);