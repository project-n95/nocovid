var kaliumGroupedMetaboxes={};!function(t,e,a){"use strict";t(document).ready((function(){if("undefined"!=typeof acf){t.extend(a,{setLoading:function(e){var a;t("#kalium-acfpro-grouped-metaboxes")[e?"addClass":"removeClass"]("is-loading")},cacheId:function(){var t;return"kalium_acfpro_gm_tab_"+acf.data.post_id},setActiveTab:function(t){"object"==typeof store&&store.enabled&&store.set(a.cacheId(),{activeTab:t})},getActiveTab:function(){if("object"==typeof store&&store.enabled){var t=store.get(a.cacheId());if(t&&"activeTab"in t)return t.activeTab}return null}});var e=function(){"undefined"!=typeof acf&&this.init()};e.prototype={constructor:e.prototype.constructor,init:function(){var e=this,a="kalium-acfpro-grouped-metaboxes";this.groupedMetaboxes=_k.groupedMetaboxes,this.assignedContentTabs=[],this.currentTab="",this.$tabs=t("."+a+"-tabs"),this.$body=t("."+a+"-body"),this.$container=t("."+a+"-container"),this.buildTabsList(),this.assignContentTabs(),this.toggleVisibleTabs(),this.setActiveTab(),this.$container.addClass("loaded"),acf.addAction("check_screen_complete",(function(t,a){e.assignContentTabs(),e.toggleVisibleTabs(),e.setActiveTab()}))},getPostboxes:function(){var e=[],a=[];for(var i in this.groupedMetaboxes)a.push(i);return t.each(acf.getPostboxes(),(function(i,n){var o=n.data.key;-1!==t.inArray(o,a)&&e.push(n)})),e},buildTabsList:function(){var e=this;t.each(this.groupedMetaboxes,(function(a,i){var n=t('<li><a href="#"></a></li>'),o=i.title,s=i.icon;n.attr("data-group-key",a);var r=n.find("a");o=o.replace(/\s\(Portfolio Type.*?\)/i,""),r.html(o),s&&r.prepend('<i class="fas fa-'+s+'"></i>'),e.$tabs.append(n),r.on("click",(function(t){t.preventDefault(),e.setActiveTab(a,!0)}))}))},assignContentTabs:function(){var e=this;t.each(e.getPostboxes(),(function(a,i){var n=i.data.id,o=t("#"+n);if(-1===t.inArray(e.assignedContentTabs,n)){var s=t('<div class="tab-entry"></div>');s.appendTo(e.$body),s.append(i.$el),e.assignedContentTabs.push(n)}}))},toggleVisibleTabs:function(){var e=this;t.each(e.getPostboxes(),(function(t,a){var i=!a.isVisible(),n=e.getTab(a);n&&n.$el[i?"addClass":"removeClass"]("visible")})),this.maintainHeight()},maintainHeight:function(){this.$body.css("min-height",this.$tabs.outerHeight())},getTab:function(e){var a=this,i=null;return t.each(this.groupedMetaboxes,(function(t,n){if(t===e.data.key)return(i=n).id=t,i.$el=a.$tabs.find('[data-group-key="'+t+'"]'),!1})),i},getActiveTab:function(){var e=this,i=null;return t.each(e.getPostboxes(),(function(t,e){if(!e.isVisible())return i=e.data.key,!1})),t.each(e.getPostboxes(),(function(t,e){if(a.getActiveTab()===e.data.key)return i=e.data.key,!1})),i},setActiveTab:function(t,e){t||(t=this.currentTab?this.currentTab:this.getActiveTab());var i=acf.getPostbox("acf-"+t);if(i){var n=this.getTab(i);n.$el.siblings().removeClass("active"),n.$el.addClass("active");var o=i.$el.parent(),s;o.siblings().removeClass("active"),o.addClass("active"),this.currentTab=t,e&&a.setActiveTab(t),this.maintainHeight()}}},new e}}))}(jQuery,window,kaliumGroupedMetaboxes),function(t,e){"use strict";t(document).ready((function(){if("undefined"!=typeof acf){var a=function(a){var i="kalium-acfpro-portfolio-item-type",n={"type-1":"portfolio-item-type-1.png","type-2":"portfolio-item-type-2.png","type-3":"portfolio-item-type-3.png","type-4":"portfolio-item-type-4.png","type-5":"portfolio-item-type-5.png","type-6":"portfolio-item-type-6.png","type-7":"portfolio-item-type-7.png"};for(var o in n)n[o]=_k.kaliumAssetsDir+"admin/images/portfolio/"+n[o];a.addClass(i);var s=a.find(".acf-input"),r=s.find("select"),c=e.location.toString().match(/action=edit/),d=[r.val(),r.find("option:selected").html()],l=r.val(),p=t('<div class="'+i+'-images"><div class="loader"></div></div>');s.before(p),r.find("option").each((function(e,a){var o=t(a),s=o.val(),c=o.html(),d=t('<a href="#" class="'+i+'-option" data-value="'+s+'"><span><img src="'+n[s]+'" /></span><strong>'+c+"</strong></a>");d.find("img").on("load",(function(){t(this).addClass("loaded")})),p.append(d),d.on("click",(function(t){t.preventDefault(),o.prop("selected",!0).attr("selected",!0),r.trigger("change")}))}));var f=t('<div class="'+i+'-warning"></div>');c&&(f.append("<strong>Note:</strong> You are currently using <strong>"+d[1]+"</strong> type. If you change this portfolio type you may lose/overwrite some of the current settings."),p.after(f));var u=function(t){var e=r.val();(t||l!=e)&&(p.find("."+i+"-option").removeClass("active"),p.find("."+i+'-option[data-value="'+e+'"]').addClass("active"),l=e,acf.screen.data.item_type=e,acf.screen.check(),p.addClass("is-loading"),kaliumGroupedMetaboxes.setLoading(!0),e!=d[0]?f.slideDown(300):f.slideUp(300))};r.on("change",u),p.find("."+i+'-option[data-value="'+r.val()+'"]').addClass("active"),acf.addAction("check_screen_complete",(function(t,e){"item_type"in e&&(p.removeClass("is-loading"),kaliumGroupedMetaboxes.setLoading(!1))}),1),"post-new-php"==adminpage&&u(!0)},i=acf.getFields({name:"item_type"});i.length&&t.each(i,(function(t,e){var i=e.$el;a(i)}))}}))}(jQuery,window);